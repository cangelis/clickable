/**
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * dataset ployfill
 * Copyright (c) 2012 Remy Sharp, http://remysharp.com
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

(function(){function j(){r=!0;this.removeEventListener("DOMAttrModified",j,!1)}function m(){var e={};g.call(this.attributes,function(b){if(n=b.name.match(f))e[n[1].replace(i,function(e,b){return b.toUpperCase()})]=b.value});return e}var g=[].forEach,f=/^data-(.+)/,i=/\-([a-z])/ig,b=document.createElement("div"),r=!1,n;void 0==b.dataset&&(b.addEventListener("DOMAttrModified",j,!1),b.setAttribute("foo","bar"),Element.prototype.__defineGetter__("dataset",r?function(){this._datasetCache||(this._datasetCache=
m.call(this));return this._datasetCache}:m),document.addEventListener("DOMAttrModified",function(b){delete b.target._datasetCache},!1))})();
var Clickable=function(j,m,g,f,i){function b(a,b){function c(){a.addEventListener("touchstart",g,!1);a.addEventListener("touchmove",o,!1);a.addEventListener("touchend",i,!1);a.addEventListener("touchcancel",o,!1)}function h(){a.removeEventListener("touchstart",g);a.removeEventListener("touchmove",o);a.removeEventListener("touchend",i);a.removeEventListener("touchcancel",o)}function f(){var b=a,c;c=a.className.replace(t,"");c=String(c).replace(r,"");b.className=c}function g(){l=!1;if(a.disabled)p=
!1;else{p=!0;var c=s=+new Date;setTimeout(function(){p&&c===s&&(a.className+=" "+b)},n)}}function o(){p=l=!1;a.disabled||f()}function i(c){function d(){l=!0;var b=m.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,j,1,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}var e=p;o();e&&!a.disabled&&(c.stopImmediatePropagation?+new Date-s>n?d():(a.className+=" "+b,setTimeout(function(){f();d()},1)):l=!0)}function k(b){if(!a.disabled&&l)l=!1;else return b.stopImmediatePropagation&&b.stopImmediatePropagation(),
b.preventDefault(),b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1}var d;a:if(a){try{d=a instanceof Node||a instanceof HTMLElement;break a}catch(q){}d="object"!==typeof a||"number"!==typeof a.nodeType||"string"!==typeof a.nodeName?!1:!0}else d=!1;if(!d)throw TypeError("element "+a+" must be a DOM element");if(!a._clickable&&(a._clickable=!0,e.ios||e.android)){switch(typeof b){case "undefined":b="active";case "string":break;default:throw TypeError("active class "+b+" must be a string");}var t=
RegExp("\\b"+b+"\\b"),p=!1,l=!1,s;a.dataset.clickableActiveClass=b;a.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)";a.addEventListener("click",k,!1);if(e.ios){a.addEventListener("DOMNodeInsertedIntoDocument",c,!1);a.addEventListener("DOMNodeRemovedFromDocument",h,!1);a:{for(d=a;d=d.parentNode;)if(d===m){d=!0;break a}d=!1}d&&c()}else c()}}var r=/^\s+|\s+$/g,n=40,e,h=j.navigator.userAgent,c,k,q;if(q=/\bCPU.*OS (\d+(_\d+)?)/i.exec(h))c="ios",k=q[1].replace("_",".");else if(q=/\bAndroid (\d+(\.\d+)?)/.exec(h))c=
"android",k=q[1];h={name:c,version:k&&j.parseFloat(k)};h[c]=!0;e=h;c=function(){b.apply(this,arguments)};g&&g.plugin("clickable",function(){b.apply(this,arguments)});f&&f.extend(f.fn,{clickable:function(a){this.forEach(function(c){b(c,a)});return this}});i&&(i.fn.clickable=function(a){this.each(function(){b(this,a)});return this});c.touchable=function(){return e.ios||e.android};return c}(window,document,window.clik,window.Zepto,window.jQuery);
