/**
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

var Clickable=function(q,t,n,l,o){function g(a,i){function d(){a.addEventListener("touchstart",n,!1);a.addEventListener("touchmove",p,!1);a.addEventListener("touchend",o,!1);a.addEventListener("touchcancel",p,!1)}function j(){a.removeEventListener("touchstart",n);a.removeEventListener("touchmove",p);a.removeEventListener("touchend",o);a.removeEventListener("touchcancel",p)}function g(){var b=a,e;e=a.className.replace(v,"");e=String(e).replace(w,"");b.className=e}function k(b){e=!1;a.disabled?(b.preventDefault(),
f=!1):(f=!0,a.className+=" "+i)}function h(a){a.preventDefault();e=f=!1;g()}function l(b){a.disabled?(b.preventDefault(),e=f=!1):(f?e=!0:(b.preventDefault(),e=!1),f=!1,g())}function n(b){e=!1;var b=b.target,c=!1;do if(b===a)c=!0;else if(b._clickable)break;while(b=b.parentNode);if(a.disabled||!c)f=!1;else{f=!0;var d=r=+new Date;setTimeout(function(){f&&d===r&&(a.className+=" "+i)},u)}}function p(){f=e=!1;a.disabled||g()}function o(b){function c(){e=!0;var b=t.createEvent("MouseEvents");b.initMouseEvent("click",
!0,!0,q,1,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}var d=f;p();d&&!a.disabled&&(b.stopImmediatePropagation?+new Date-r>u?c():(a.className+=" "+i,setTimeout(function(){g();c()},1)):e=!0)}function s(b){b=b||q.event;if(!a.disabled&&e)e=!1;else return b.stopImmediatePropagation&&b.stopImmediatePropagation(),b.preventDefault(),b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1}var c;a:if(a){try{c=a instanceof Node||a instanceof HTMLElement;break a}catch(x){}c="object"!==typeof a||"number"!==
typeof a.nodeType||"string"!==typeof a.nodeName?!1:!0}else c=!1;if(!c)throw TypeError("element "+a+" must be a DOM element");if(!a._clickable){a._clickable=!0;switch(typeof i){case "undefined":i="active";case "string":break;default:throw TypeError("active class "+i+" must be a string");}var v=RegExp("\\b"+i+"\\b"),f=!1,e=!1,r;if(m.ios||m.android)if(a.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)",a.addEventListener("click",s,!1),m.ios){a.addEventListener("DOMNodeInsertedIntoDocument",
d,!1);a.addEventListener("DOMNodeRemovedFromDocument",j,!1);a:{for(c=a;c=c.parentNode;)if(c===t){c=!0;break a}c=!1}c&&d()}else d();else a.addEventListener?(a.addEventListener("mousedown",k,!1),a.addEventListener("mousemove",h,!1),a.addEventListener("mouseout",h,!1),a.addEventListener("mouseup",l,!1),a.addEventListener("click",s,!1)):a.attachEvent&&(a.attachEvent("onmousedown",k),a.attachEvent("onmousemove",h),a.attachEvent("onmouseout",h),a.attachEvent("onmouseup",l),a.attachEvent("onclick",s))}}
var w=/^\s+|\s+$/g,u=40,m,j=q.navigator.userAgent,d,k,h;if(h=/\bCPU.*OS (\d+(_\d+)?)/i.exec(j))d="ios",k=h[1].replace("_",".");else if(h=/\bAndroid (\d+(\.\d+)?)/.exec(j))d="android",k=h[1];j={name:d,version:k&&q.parseFloat(k)};j[d]=!0;m=j;d=function(){g.apply(this,arguments)};n&&n.plugin("clickable",function(){g.apply(this,arguments)});l&&l.extend(l.fn,{clickable:function(a){this.forEach(function(d){g(d,a)});return this}});o&&(o.fn.clickable=function(a){this.each(function(){g(this,a)});return this});
d.touchable=function(){return m.ios||m.android};return d}(window,document,window.clik,window.Zepto,window.jQuery);
