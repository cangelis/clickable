/**
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * dataset ployfill
 * Copyright (c) 2012 Remy Sharp, http://remysharp.com
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

(function(){function h(){o=!0;this.removeEventListener("DOMAttrModified",h,!1)}function p(){var c={};i.call(this.attributes,function(a){if(k=a.name.match(f))c[k[1].replace(d,function(a,c){return c.toUpperCase()})]=a.value});return c}var i=[].forEach,f=/^data-(.+)/,d=/\-([a-z])/ig,a=document.createElement("div"),o=!1,k;void 0==a.dataset&&(a.addEventListener("DOMAttrModified",h,!1),a.setAttribute("foo","bar"),Element.prototype.__defineGetter__("dataset",o?function(){this._datasetCache||(this._datasetCache=
p.call(this));return this._datasetCache}:p),document.addEventListener("DOMAttrModified",function(a){delete a.target._datasetCache},!1))})();
var Clickable=function(h,p,i,f,d){function a(b,a){function e(){var a=b,c;c=b.className.replace(j,"");c=String(c).replace(o,"");a.className=c}function g(){m=!1;if(b.disabled)n=!1;else{n=!0;var c=q=+new Date;setTimeout(function(){n&&c===q&&(b.className+=" "+a)},k)}}function f(){n=m=!1;b.disabled||e()}function i(){function c(){m=!0;var a=p.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,h,1,0,0,0,0,!1,!1,!1,!1,0,null);b.dispatchEvent(a)}var d=n;f();d&&!b.disabled&&(+new Date-q>k?c():(b.className+=
" "+a,setTimeout(function(){e();c()},1)))}var d;a:if(b){try{d=b instanceof Node||b instanceof HTMLElement;break a}catch(l){}d="object"!==typeof b||"number"!==typeof b.nodeType||"string"!==typeof b.nodeName?!1:!0}else d=!1;if(!d)throw b+" is not a DOM element";if(!b._clickable&&(b._clickable=!0,c.ios||c.android)){switch(typeof a){case "undefined":a="active";case "string":break;default:throw TypeError("active class "+a+" must be a string");}var j=RegExp("\\b"+a+"\\b"),n=!1,m=!1,q;b.dataset.clickableActiveClass=
a;b.style["-webkit-tap-highlight-color"]="transparent";b.addEventListener("touchstart",g,!1);b.addEventListener("touchmove",f,!1);b.addEventListener("touchend",i,!1);b.addEventListener("touchcancel",f,!1);b.addEventListener("click",function(a){if(!b.disabled&&m)m=!1;else return a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),a.returnValue=!1},!1)}}var o=/^\s+|\s+$/g,k=40,c,g=h.navigator.userAgent,e,l,j;if(j=/\bCPU.*OS (\d+(_\d+)?)/i.exec(g))e="ios",l=j[1].replace("_",".");else if(j=
/\bAndroid (\d+(\.\d+)?)/.exec(g))e="android",l=j[1];g={name:e,version:l&&h.parseFloat(l)};g[e]=!0;c=g;e=function(){a.apply(this,arguments)};i&&i.plugin("clickable",function(){a.apply(this,arguments)});f&&f.extend(f.fn,{clickable:function(b){this.forEach(function(c){a(c,b)});return this}});d&&(d.fn.clickable=function(b){this.each(function(){a(this,b)});return this});e.touchable=function(){return c.ios||c.android};return e}(window,document,window.clik,window.Zepto,window.jQuery);
