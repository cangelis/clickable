/**
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * dataset ployfill
 * Copyright (c) 2012 Remy Sharp, http://remysharp.com
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

(function(){function h(){i=!0;this.removeEventListener("DOMAttrModified",h,!1)}function m(){var c={};e.call(this.attributes,function(b){if(d=b.name.match(g))c[d[1].replace(j,function(b,a){return a.toUpperCase()})]=b.value});return c}var e=[].forEach,g=/^data-(.+)/,j=/\-([a-z])/ig,b=document.createElement("div"),i=!1,d;void 0==b.dataset&&(b.addEventListener("DOMAttrModified",h,!1),b.setAttribute("foo","bar"),Element.prototype.__defineGetter__("dataset",i?function(){this._datasetCache||(this._datasetCache=
m.call(this));return this._datasetCache}:m),document.addEventListener("DOMAttrModified",function(b){delete b.target._datasetCache},!1))})();
var Clickable=function(h,m,e,g,j){function b(a,b){function d(){f=!0;l=!1;var c=n=+new Date;setTimeout(function(){f&&c===n&&(a.className+=" "+b)},40)}function c(){l=f=!1;a.className=a.className.replace(j,"")}function g(){var b=f;c();b&&(l=!0,b=m.createEvent("MouseEvents"),b.initMouseEvent("click",!0,!0,h,1,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(b))}var e;a:if(a){try{e=a instanceof Node||a instanceof HTMLElement;break a}catch(k){}e="object"!==typeof a||"number"!==typeof a.nodeType||"string"!==
typeof a.nodeName?!1:!0}else e=!1;if(!e)throw a+" is not a DOM element";if(!a._clickable&&(a._clickable=!0,i.ios||i.android)){switch(typeof b){case "undefined":b="active";case "string":break;default:throw TypeError("active class "+b+" must be a string");}var j=RegExp("\\b"+b+"\\b"),f=!1,l=!1,n;a.dataset.clickableActiveClass=b;a.style["-webkit-tap-highlight-color"]="transparent";a.addEventListener("touchstart",d,!1);a.addEventListener("touchmove",c,!1);a.addEventListener("touchend",g,!1);a.addEventListener("touchcancel",
c,!1);a.addEventListener("click",function(a){if(l)l=!1;else return a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),a.returnValue=!1},!1)}}var i,d=h.navigator.userAgent,c,k,f;if(f=/\bCPU.*OS (\d+(_\d+)?)/i.exec(d))c="ios",k=f[1].replace("_",".");else if(f=/\bAndroid (\d+(\.\d+)?)/.exec(d))c="android",k=f[1];d={name:c,version:k&&h.parseFloat(k)};d[c]=!0;i=d;e&&e.plugin("clickable",function(){b.apply(this,arguments)});g&&g.extend(g.fn,{clickable:function(a){this.forEach(function(c){b(c,
a)});return this}});j&&(j.fn.clickable=function(a){this.each(function(){b(this,a)});return this});return function(){b.apply(this,arguments)}}(window,document,window.clik,window.Zepto,window.jQuery);
