/**
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * dataset ployfill
 * Copyright (c) 2012 Remy Sharp, http://remysharp.com
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

(function(){function g(){n=!0;this.removeEventListener("DOMAttrModified",g,!1)}function o(){var c={};h.call(this.attributes,function(a){if(i=a.name.match(e))c[i[1].replace(k,function(a,c){return c.toUpperCase()})]=a.value});return c}var h=[].forEach,e=/^data-(.+)/,k=/\-([a-z])/ig,a=document.createElement("div"),n=!1,i;void 0==a.dataset&&(a.addEventListener("DOMAttrModified",g,!1),a.setAttribute("foo","bar"),Element.prototype.__defineGetter__("dataset",n?function(){this._datasetCache||(this._datasetCache=
o.call(this));return this._datasetCache}:o),document.addEventListener("DOMAttrModified",function(a){delete a.target._datasetCache},!1))})();
var Clickable=function(g,o,h,e,k){function a(b,a){function c(){l=!1;if(b.disabled)m=!1;else{m=!0;var p=f=+new Date;setTimeout(function(){m&&p===f&&(b.className+=" "+a)},40)}}function e(){m=l=!1;if(!b.disabled){var a=b,c;c=b.className.replace(j,"");c=String(c).replace(n,"");a.className=c}}function h(){var a=m;e();a&&!b.disabled&&(l=!0,a=o.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,g,1,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a))}var d;a:if(b){try{d=b instanceof Node||b instanceof
HTMLElement;break a}catch(k){}d="object"!==typeof b||"number"!==typeof b.nodeType||"string"!==typeof b.nodeName?!1:!0}else d=!1;if(!d)throw b+" is not a DOM element";if(!b._clickable&&(b._clickable=!0,i.ios||i.android)){switch(typeof a){case "undefined":a="active";case "string":break;default:throw TypeError("active class "+a+" must be a string");}var j=RegExp("\\b"+a+"\\b"),m=!1,l=!1,f;b.dataset.clickableActiveClass=a;b.style["-webkit-tap-highlight-color"]="transparent";b.addEventListener("touchstart",
c,!1);b.addEventListener("touchmove",e,!1);b.addEventListener("touchend",h,!1);b.addEventListener("touchcancel",e,!1);b.addEventListener("click",function(a){if(!b.disabled&&l)l=!1;else return a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),a.returnValue=!1},!1)}}var n=/^\s+|\s+$/g,i,c=g.navigator.userAgent,d,j,f;if(f=/\bCPU.*OS (\d+(_\d+)?)/i.exec(c))d="ios",j=f[1].replace("_",".");else if(f=/\bAndroid (\d+(\.\d+)?)/.exec(c))d="android",j=f[1];c={name:d,version:j&&g.parseFloat(j)};
c[d]=!0;i=c;h&&h.plugin("clickable",function(){a.apply(this,arguments)});e&&e.extend(e.fn,{clickable:function(b){this.forEach(function(c){a(c,b)});return this}});k&&(k.fn.clickable=function(b){this.each(function(){a(this,b)});return this});return function(){a.apply(this,arguments)}}(window,document,window.clik,window.Zepto,window.jQuery);
